# User Story 01 - Criação de conta

zerarSistema

# entradas válidas

criarUsuario login="mark" senha="12345678" nome="Mark Zuckerberg" endereco="Palo Alto, California"

# o método 'abrirSessao' retorna o ID da sessão
sessaoMark=abrirSessao login="mark" senha="12345678"
expect "Mark Zuckerberg" getAtributoUsuario login="mark" atributo="nome"
expect "Palo Alto, California" getAtributoUsuario login="mark" atributo="endereco"
cadastrarEmailRedefinicaoSenha idSessao=${sessaoMark} email="emprestimuswebsi@gmail.com"
encerrarSessao idSessao=${sessaoMark}
novoPasseMarkUm=recuperarSenha login="mark" email="emprestimuswebsi@gmail.com"
sleepSystemTeste milissegundos=400
sessaoMark=abrirSessao login="mark" senha=${novoPasseMarkUm}
expect "Mark Zuckerberg" getAtributoUsuario login="mark" atributo="nome"
expect "Palo Alto, California" getAtributoUsuario login="mark" atributo="endereco"
encerrarSessao idSessao=${sessaoMark}
novoPasseMarkDois=recuperarSenha login="mark" email="emprestimuswebsi@gmail.com"
sleepSystemTeste milissegundos=400
sessaoMark=abrirSessao login="mark" senha=${novoPasseMarkDois}

# entradas inválidas

expectError "Login inválido" criarUsuario login= senha="xpto" nome="xpto" endereco="xpto"
expectError "Login inválido" criarUsuario login="" senha="xpto" nome="xpto" endereco="xpto"
expectError "Senha inválida" criarUsuario login="xpto" senha= nome="xpto" endereco="xpto"
expectError "Senha inválida" criarUsuario login="xpto" senha="" nome="xpto" endereco="xpto"
expectError "Nome inválido" criarUsuario login="xpto" senha="xpto" nome= endereco="xpto"
expectError "Nome inválido" criarUsuario login="xpto" senha="xpto" nome="" endereco="xpto"
expectError "Já existe um usuário com este login" criarUsuario login="mark" senha="xpto" nome="xpto" endereco="xpto"
expectError "Login inválido" abrirSessao login= senha="xpto"
expectError "Login inválido" abrirSessao login="" senha="xpto"
expectError "Usuário inexistente" abrirSessao login="xpto" senha="xpto"
expectError "Senha inválida" abrirSessao login="mark" senha=
expectError "Senha inválida" abrirSessao login="mark" senha=""

expectError "Sessão inválida" cadastrarEmailRedefinicaoSenha idSessao= email="emprestimuswebsi@gmail.com"
expectError "Sessão inválida" cadastrarEmailRedefinicaoSenha idSessao="" email="emprestimuswebsi@gmail.com"
expectError "Sessão inexistente" cadastrarEmailRedefinicaoSenha idSessao="xpto" email="emprestimuswebsi@gmail.com"
expectError "Email inválido" cadastrarEmailRedefinicaoSenha idSessao=${sessaoMark} email=
expectError "Email inválido" cadastrarEmailRedefinicaoSenha idSessao=${sessaoMark} email=""
expectError "Email inválido" cadastrarEmailRedefinicaoSenha idSessao=${sessaoMark} email="@gmail.com"
expectError "Email inválido" cadastrarEmailRedefinicaoSenha idSessao=${sessaoMark} email="@gmail.com.br"
expectError "Email inválido" cadastrarEmailRedefinicaoSenha idSessao=${sessaoMark} email="@gmail.xpg"
expectError "Email inválido" cadastrarEmailRedefinicaoSenha idSessao=${sessaoMark} email="teste@@gmail.xpg"
expectError "Email inválido" cadastrarEmailRedefinicaoSenha idSessao=${sessaoMark} email="teste@gmail.xpg."
expectError "Email inválido" cadastrarEmailRedefinicaoSenha idSessao=${sessaoMark} email="@"
expectError "Email inválido" cadastrarEmailRedefinicaoSenha idSessao=${sessaoMark} email="@.xpg"
expectError "Email inválido" cadastrarEmailRedefinicaoSenha idSessao=${sessaoMark} email="@gmail..xpg"
expectError "Email inválido" cadastrarEmailRedefinicaoSenha idSessao=${sessaoMark} email="@gmail.xpg.."

expectError "Sessão inválida" alterarSenha idSessao= senhaAtual="xpto" senhaNova="xpto"
expectError "Sessão inválida" alterarSenha idSessao="" senhaAtual="xpto" senhaNova="xpto"
expectError "Senha atual inválida" alterarSenha idSessao=${sessaoMark} senhaAtual= senhaNova="xpto"
expectError "Senha atual inválida" alterarSenha idSessao=${sessaoMark} senhaAtual="" senhaNova="xpto"
expectError "Senha nova inválida" alterarSenha idSessao=${sessaoMark} senhaAtual="87654321" senhaNova=
expectError "Senha nova inválida" alterarSenha idSessao=${sessaoMark} senhaAtual="87654321" senhaNova=""
expectError "Senha atual inválida" alterarSenha idSessao=${sessaoMark} senhaAtual="87654321" senhaNova="xpto"

expectError "Sessão inválida" encerrarSessao idSessao=
expectError "Sessão inválida" encerrarSessao idSessao=""
expectError "Sessão já encerrada" encerrarSessao idSessao="xpto"
encerrarSessao idSessao=${sessaoMark}
expectError "Sessão já encerrada" encerrarSessao idSessao=${sessaoMark}

expectError "Login ou senha incorreto(s)" abrirSessao login="mark" senha=${novoPasseMarkUm}
expectError "Login inválido" recuperarSenha login= email="xpto"
expectError "Login inválido" recuperarSenha login="" email="xpto"
expectError "Email inválido" recuperarSenha login="mark" email=
expectError "Email inválido" recuperarSenha login="mark" email=""
expectError "Email inválido ou inexistente" recuperarSenha login="mark" email="xpto"


encerrarSistema
quit
